(()=>{"use strict";var e,t,s,i={608:(e,t,s)=>{e.exports=s.p+"b9faa8f0f40119440007.json"},6881:(e,t,s)=>{var i=s(1923);class n extends i.mcf{}function o(e,t,s,n,o={}){const a=new i.EYj({text:e,style:Object.assign({fontSize:36,fill:"#ffffff"},o)});return a.anchor.set(.5),a.position.set(t,s),a.interactive=!0,a.cursor="pointer",a.on("pointerdown",n),a}class a extends i.mcf{constructor(e,t){super(),this.starIcons=[],this.createBackground(),this.messageText=this.createMessageText(),this.nextButton=this.createNextButton(e);const s=this.createRestartButton(t);this.addChild(this.messageText,s,this.nextButton),this.visible=!1}createBackground(){const e=(new i.A1g).rect(0,0,800,600).fill({color:0,alpha:.8});this.addChild(e)}createMessageText(){const e=new i.EYj({text:"",style:{fontSize:48,fill:"#ffffff"}});return e.anchor.set(.5),e.position.set(400,200),e}show(e,t=0){this.visible=!0,this.setMode(e),this.updateStars(e,t)}updateStars(e,t){if(this.starIcons.forEach((e=>this.removeChild(e))),this.starIcons=[],"win"===e)for(let e=0;e<t;e++){const t=new i.EYj({text:"⭐",style:{fontSize:36,fill:"#ffcc00"}});t.anchor.set(.5),t.position.set(340+40*e,440),this.addChild(t),this.starIcons.push(t)}}createRestartButton(e){return o("Restart",400,300,e)}createNextButton(e){const t=o("Next Level",400,370,e);return t.visible=!1,t}setMode(e){"win"===e?(this.messageText.text="You Win!",this.nextButton.visible=!0):(this.messageText.text="Time's Up!",this.nextButton.visible=!1)}}var r=s(4196);class l{static init(){this.bg=new r.Howl({src:["/assets/sounds/bg.mp3"],loop:!0,volume:.3}),this.click=new r.Howl({src:["/assets/sounds/click.mp3"]}),this.win=new r.Howl({src:["/assets/sounds/win.mp3"]}),this.lose=new r.Howl({src:["/assets/sounds/lose.mp3"]}),this.completeGame=new r.Howl({src:["/assets/sounds/lastLevelWinSound.mp3"]})}static play(e){!this.isMuted&&this[e]instanceof r.Howl&&this[e].play()}static toggleMute(){this.isMuted=!this.isMuted,this.bg.mute(this.isMuted)}static playBg(){this.isMuted||this.bg.playing()||this.bg.play()}static playWinGameSound(){this.isMuted||this.completeGame.playing()||this.completeGame.play()}static stopBg(){this.bg.stop()}}l.isMuted=!1;class h extends i.Dl5{constructor(e){if(!e||0===e.length)throw new Error("Enemy requires at least one texture");super(e,!0),this.handleClick=()=>{this.destroyed||c.isGameOver()||(this.destroy(),h.onEnemyDefeated(this),l.play("click"))},this.speed=2*Math.random()+1,this.anchor.set(.5),this.position.set(800*Math.random(),-50),this.animationSpeed=.15,this.loop=!0,this.play(),this.setupInteractivity()}setupInteractivity(){this.interactive=!0,this.on("pointerdown",this.handleClick)}updateEnemy(e){this.x+=Math.sin(.01*this.y)*this.speed*e,this.y+=this.speed*e,this.y>650&&(this.y=-50,this.x=800*Math.random())}destroy(){this.off("pointerdown",this.handleClick),super.destroy()}}h.onEnemyDefeated=()=>{},h.onEnemyEscaped=()=>{};class c{static init(e,t,s){this.container=e,this.enemyTextures=t,this.totalToSpawn=s,this.spawnedCount=0,this.lastSpawnTime=0,this.enemies=[]}static canSpawn(){return this.spawnedCount<this.totalToSpawn&&this.enemyTextures.length>0&&this.enemyTextures.every((e=>null!=e))}static spawnEnemy(){if(!this.canSpawn())return null;const e=new h(this.enemyTextures);return this.container.addChild(e),this.enemies.push(e),this.spawnedCount++,e}static update(e){const t=Date.now();!this.gameOver&&t-this.lastSpawnTime>this.spawnInterval&&(this.spawnEnemy(),this.lastSpawnTime=t),this.enemies=this.enemies.filter((e=>!e.destroyed)),this.enemies.forEach((t=>t.updateEnemy(e)))}static setEnemiesInteractive(e){this.enemies.forEach((t=>t.interactive=e))}static reset(){this.clearEnemies(),this.spawnedCount=0,this.totalToSpawn=0}static clearEnemies(){this.enemies.forEach((e=>e.destroy())),this.enemies=[]}static getAliveCount(){return this.enemies.filter((e=>!e.destroyed)).length}static setGameOver(e){this.gameOver=e}static isGameOver(){return this.gameOver}}c.enemies=[],c.enemyTextures=[],c.totalToSpawn=0,c.spawnedCount=0,c.spawnInterval=1e3,c.lastSpawnTime=0,c.gameOver=!1;class d{static loadLevels(){return e=this,t=void 0,n=function*(){const e=new URL(s(608),s.b).href,t=yield fetch(e);this.levels=yield t.json()},new((i=void 0)||(i=Promise))((function(s,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}));var e,t,i,n}static getCurrentLevel(){return this.levels[this.currentLevelIndex]}static nextLevel(){this.currentLevelIndex<this.levels.length-1&&this.currentLevelIndex++}static isLastLevel(){return this.currentLevelIndex>=this.levels.length-1}static reset(){this.currentLevelIndex=0}static getLevelId(){var e;return(null===(e=this.levels[this.currentLevelIndex])||void 0===e?void 0:e.id)||0}}function u(e,t,s,n,o,a={},r){t&&(e.removeChild(t),t.destroy());const l=new i.EYj({text:s,style:Object.assign({fontSize:24,fill:"#ffffff"},a)});return r&&l.anchor.set(r.x,r.y),l.position.set(n,o),e.addChild(l),l}d.levels=[],d.currentLevelIndex=0;class p extends n{constructor(){super();const e=this.completeGameText(),t=this.createBackButton();this.addChild(t,e)}createBackButton(){return o("↩️ Back to Menu",400,350,(()=>{d.reset(),w.instance.changeScene(new y)}),{fontSize:24,fill:"#ffffff"})}completeGameText(){return u(this,null,"🎉 You Completed All Levels!",400,250,{fontSize:36,fill:"#00ff00"},{x:.5,y:.5})}}class f extends n{constructor(){super(),this.enemyTextures=[],this.enemiesDefeated=0,this.levelTimeLeft=0,this.elapsedTime=0,this.levelEnded=!1,this.isPaused=!1,this.boosterUsed=!1,this.transitionOverlay=(new i.A1g).rect(0,0,800,600).fill({color:0,alpha:1}),this.transitionOverlay.alpha=0,this.addChild(this.transitionOverlay),this.winScreen=new a((()=>this.nextLevel()),(()=>this.restart())),this.addChild(this.winScreen)}init(){this.loadAssets()}loadAssets(){return e=this,t=void 0,n=function*(){try{const[e,t]=yield Promise.all([i.sP.load("/assets/enemies/dr1.json"),i.sP.load("/assets/dragon-bg.png")]),s=new i.kxk(t);s.width=w.app.screen.width,s.height=w.app.screen.height,this.addChildAt(s,0);const n=Object.keys(e.textures).sort(((e,t)=>{var s,i;return parseInt((null===(s=e.match(/\d+/))||void 0===s?void 0:s[0])||"0",10)-parseInt((null===(i=t.match(/\d+/))||void 0===i?void 0:i[0])||"0",10)})).map((t=>e.textures[t]));this.enemyTextures=n,this.startLevel()}catch(e){console.error("Failed to load assets:",e)}},new((s=void 0)||(s=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}));var e,t,s,n}runTransition(e){this.transitionOverlay.alpha=0;const t=()=>{this.transitionOverlay.alpha<1?(this.transitionOverlay.alpha+=.05,requestAnimationFrame(t)):(e(),s())},s=()=>{this.transitionOverlay.alpha>0&&(this.transitionOverlay.alpha-=.05,requestAnimationFrame(s))};t()}showLevelPopup(e){this.levelPopupText&&(this.removeChild(this.levelPopupText),this.levelPopupText.destroy()),this.levelPopupText=new i.EYj({text:`Level ${e}`,style:{fontSize:60,fill:"#ffffff",fontWeight:"bold"}}),this.levelPopupText.anchor.set(.5),this.levelPopupText.position.set(400,300),this.addChild(this.levelPopupText),setTimeout((()=>{this.levelPopupText&&(this.removeChild(this.levelPopupText),this.levelPopupText.destroy(),this.levelPopupText=void 0)}),1e3)}soundMute(){this.muteBtn?this.updateMuteIcon():(this.muteBtn=new i.EYj({text:l.isMuted?"🔇":"🔊",style:{fontSize:30,fill:"#ffffff"}}),this.muteBtn.position.set(740,10),this.muteBtn.interactive=!0,this.muteBtn.on("pointerdown",(()=>{l.toggleMute(),this.updateMuteIcon()})),this.addChild(this.muteBtn))}updateMuteIcon(){this.muteBtn.text=l.isMuted?"🔇":"🔊"}startLevel(){c.setGameOver(!1),this.enemiesDefeated=0,this.elapsedTime=0,this.levelEnded=!1,this.boosterUsed=!1;const e=d.getCurrentLevel();this.totalEnemies=e.enemies,this.levelTimeLeft=e.time,this.timeText=u(this,this.timeText,`Time: ${this.levelTimeLeft}`,10,40),this.levelText=u(this,this.levelText,`Level ${e.id}`,10,10),this.killCounterText=u(this,this.killCounterText,`Killed: 0 / ${this.totalEnemies}`,10,70),this.createPauseButton(),this.createBoosterButton(),this.soundMute(),c.init(this,this.enemyTextures,e.enemies),this.showLevelPopup(e.id),h.onEnemyDefeated=()=>this.handleEnemyDefeated()}createPauseButton(){const e=new i.EYj({text:"⏸️",style:{fontSize:30,fill:"#ffffff"}});e.position.set(680,10),e.interactive=!0,e.on("pointerdown",(()=>{this.togglePause(),e.text=this.isPaused?"▶️":"⏸️"})),this.addChild(e)}createBoosterButton(){this.boosterButton=new i.EYj({text:"⏳ - Booster",style:{fontSize:24,fill:"#ffffff"}}),this.boosterButton.position.set(500,10),this.boosterButton.interactive=!0,this.boosterButton.on("pointerdown",(()=>this.useBooster())),this.addChild(this.boosterButton)}handleEnemyDefeated(){if(this.enemiesDefeated++,this.updateProgressDisplay(),this.enemiesDefeated>=this.totalEnemies){const e=function(e,t){const s=t/e;return s>=.67?3:s>=.34?2:1}(d.getCurrentLevel().time,this.levelTimeLeft);this.winScreen.setMode("win"),this.winScreen.show("win",e),this.levelEnded=!0,l.play("win")}}useBooster(){this.boosterUsed||this.levelEnded||(this.levelTimeLeft+=5,this.timeText.text=`Time: ${this.levelTimeLeft}`,this.boosterUsed=!0,this.boosterButton.text="Booster Used",this.boosterButton.style.fill="#272727",this.boosterButton.interactive=!1)}nextLevel(){d.isLastLevel()?(w.instance.changeScene(new p),l.playWinGameSound()):this.runTransition((()=>{this.boosterUsed=!1,this.boosterButton.text="",this.showLose(),d.nextLevel(),c.reset(),this.startLevel()}))}onLevelFailed(){this.winScreen.show("lose"),c.setGameOver(!0),l.play("lose")}updateProgressDisplay(){this.killCounterText&&(this.killCounterText.text=`Killed: ${this.enemiesDefeated} / ${this.totalEnemies}`)}showLose(){this.winScreen.visible=!1}updateScene(e){this.levelEnded||this.isPaused||!this.timeText||(c.update(e),this.elapsedTime+=e/60,this.elapsedTime>=1&&(this.elapsedTime=0,this.levelTimeLeft--,this.timeText.text=`Time: ${this.levelTimeLeft}`,this.timeText.style.fill=this.levelTimeLeft<=5?"#ff0000":"#ffffff",this.levelTimeLeft<=0&&(this.levelEnded=!0,this.onLevelFailed())))}togglePause(){this.levelEnded||(this.isPaused=!this.isPaused,this.boosterButton.interactive=!this.isPaused,c.setEnemiesInteractive(!this.isPaused))}restart(){c.reset(),this.showLose(),this.boosterUsed=!1,this.boosterButton.text="",this[this.enemyTextures.length?"startLevel":"loadAssets"]()}}var v,m;class y extends n{constructor(){super();const e="url('/assets/sword.png'), auto";w.app.renderer.events.cursorStyles.default=e,w.app.renderer.events.cursorStyles.hover=e,this.loadAssets()}loadAssets(){return e=this,t=void 0,n=function*(){const e=yield i.sP.load("/assets/startGame.png"),t=new i.kxk(e);t.anchor.set(.5),t.position.set(w.app.screen.width/2,w.app.screen.height/2),t.scale.set(.5),t.interactive=!0,t.eventMode="static",t.cursor="pointer";const s=e.width*t.scale.x,n=e.height*t.scale.y;t.hitArea=new i.M_G(-s/2,-n/2,s,n),t.on("pointerdown",(()=>{l.playBg(),w.instance.changeScene(new f)})),this.addChild(t)},new((s=void 0)||(s=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}));var e,t,s,n}}class w{constructor(){w.app=new i.lgM({width:800,height:600,backgroundColor:1087931}),w.instance=this,w.app.init().then((()=>{document.body.appendChild(w.app.canvas),this.start(),w.app.ticker.add((e=>{const t=e.deltaTime,s=w.currentScene;s&&"function"==typeof s.updateScene&&s.updateScene(t)}))})),l.init()}start(){this.changeScene(new y)}changeScene(e){var t,s,i;w.currentScene&&(null===(s=(t=w.currentScene).onDestroy)||void 0===s||s.call(t),w.app.stage.removeChild(w.currentScene)),w.currentScene=e,null===(i=e.init)||void 0===i||i.call(e),w.app.stage.addChild(e)}}m=function*(){yield d.loadLevels(),new w,i.RvI.shared.autoStart=!0,i.RvI.shared.start()},new((v=void 0)||(v=Promise))((function(e,t){function s(e){try{n(m.next(e))}catch(e){t(e)}}function i(e){try{n(m.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof v?n:new v((function(e){e(n)}))).then(s,i)}n((m=m.apply(void 0,[])).next())}))}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return i[e](s,s.exports,o),s.exports}o.m=i,e=[],o.O=(t,s,i,n)=>{if(!s){var a=1/0;for(c=0;c<e.length;c++){for(var[s,i,n]=e[c],r=!0,l=0;l<s.length;l++)(!1&n||a>=n)&&Object.keys(o.O).every((e=>o.O[e](s[l])))?s.splice(l--,1):(r=!1,n<a&&(a=n));if(r){e.splice(c--,1);var h=i();void 0!==h&&(t=h)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,i,n]},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,s)=>(o.f[s](e,t),t)),[])),o.u=e=>e+"."+{62:"5fd0e81420d927fe7c76",151:"6717cedeaedec659a31c",162:"17123fa997ab4896ac3a",390:"afe1666b35aef6136d7e",751:"08c0f5688e10f369833c",914:"dd09f2391c79b33521c0"}[e]+".js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},s="pixi-mini-game:",o.l=(e,i,n,a)=>{if(t[e])t[e].push(i);else{var r,l;if(void 0!==n)for(var h=document.getElementsByTagName("script"),c=0;c<h.length;c++){var d=h[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==s+n){r=d;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.setAttribute("data-webpack",s+n),r.src=e),t[e]=[i];var u=(s,i)=>{r.onerror=r.onload=null,clearTimeout(p);var n=t[e];if(delete t[e],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((e=>e(i))),s)return s(i)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),l&&document.head.appendChild(r)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=s[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{o.b=document.baseURI||self.location.href;var e={792:0};o.f.j=(t,s)=>{var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)s.push(i[2]);else{var n=new Promise(((s,n)=>i=e[t]=[s,n]));s.push(i[2]=n);var a=o.p+o.u(t),r=new Error;o.l(a,(s=>{if(o.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var n=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",r.name="ChunkLoadError",r.type=n,r.request=a,i[1](r)}}),"chunk-"+t,t)}},o.O.j=t=>0===e[t];var t=(t,s)=>{var i,n,[a,r,l]=s,h=0;if(a.some((t=>0!==e[t]))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(l)var c=l(o)}for(t&&t(s);h<a.length;h++)n=a[h],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},s=self.webpackChunkpixi_mini_game=self.webpackChunkpixi_mini_game||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=o.O(void 0,[780],(()=>o(6881)));a=o.O(a)})();
//# sourceMappingURL=main.506d635b27c8f45cc6af.js.map